# キブンエイガ 開発ログ 2025-09-23

このファイルは本チャットの内容と、実装の要点を記録するための初回ログです。以降、日付ごとにファイルを追加してください（例: `docs/chat-logs/2025-09-24.md`）。

## 今日のサマリ
- リポジトリを初期化（Next.js 14 + TypeScript、Tailwind、ESLint/Prettier、Vitest）。
- ダークテーマを常時適用。
- TMDb 連携（おすすめ3件表示、詳細：予告編/配信プロバイダ）。
- Supabase 連携の準備（Auth/UI、favorites/reviews スキーマ）。
- お気に入り（追加/削除/一覧）実装。
- レビュー（5段階+テキスト、一覧・平均、ニックネーム表示）実装。

## 主要な設定
- `.env.local`
  - `TMDB_API_KEY`: TMDb v3 API キー
  - `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`: Supabase プロジェクトのURLとAnonキー
  - `NEXT_PUBLIC_SITE_URL=http://localhost:3000`
- Supabase ダッシュボード
  - Authentication: Email 有効化、（任意で）Google / X を有効化
  - URL Configuration: Site/Redirect を `http://localhost:3000` に設定
  - SQL Editor: `supabase/schema.sql` を実行（テーブル、RLS、ポリシー、一意制約）
  - `public.profiles` に `id=auth.users.id` の行を作成し、`nickname` を設定（表示名）

## 実装済みファイル（抜粋）
- アプリの骨子: `app/layout.tsx:1`, `app/page.tsx:1`
- 推薦一覧: `app/recommendations/page.tsx:1`
- 映画詳細: `app/movies/[id]/page.tsx:1`
- 認証UI: `app/auth/login/page.tsx:1`, `components/HeaderAuth.tsx:1`, `components/auth/AuthContext.tsx:1`
- お気に入り: `components/favorites/FavoriteButton.tsx:1`, `app/favorites/page.tsx:1`
- レビュー: `components/reviews/ReviewForm.tsx:1`, `components/reviews/ReviewsList.tsx:1`, `components/reviews/StarRating.tsx:1`, `components/reviews/ReviewsSection.tsx:1`
- TMDb ヘルパ: `lib/tmdb.ts:1`, `lib/moodMap.ts:1`, `lib/providerLinks.ts:1`, `lib/japanese.ts:1`
- Supabase クライアント: `lib/supabaseClient.ts:1`
- スキーマ: `supabase/schema.sql:1`

## 既知のメモ/検討事項
- 推薦のバリエーション調整は一旦シンプル版に戻し済み。必要に応じて sort/除外の段階的導入を再検討。
- 配信プロバイダは検索リンク（直リンクは各社の仕様制約により難しい）。
- プロフィール編集UI（nickname など）は未実装。

## 追記の運用ルール（提案）
- 1日1ファイルで日付名のMarkdownを追加。
- 見出しは「サマリ」「決定事項」「課題/次アクション」を基本フォーマットにする。
- 大きなコード変更は対象ファイルパスと要点だけを本文に記載（差分はGitで管理）。

## 参考: PowerShellで端末ログも保存する場合
```
Start-Transcript -Path "docs\chat-logs\terminal-2025-09-23.txt" -Append
Stop-Transcript
```

